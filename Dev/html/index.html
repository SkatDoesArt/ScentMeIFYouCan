<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/index.css">
    <script type="text/javascript" src="../js/index.js" defer></script>
    <title>SMIYC</title>
</head>
<body>

    <section class="home" id="home">
        <div class="container-home">
            <div class="back">
                <canvas id="glcanvas"></canvas>
                <script id="vertex-shader" type="x-shader/x-vertex">
                    attribute vec2 a_position;
                    void main() {
                    gl_Position = vec4(a_position, 0.0, 1.0);
                    }
                </script>
                <script id="fragment-shader" type="x-shader/x-fragment">
                #ifdef GL_ES
                precision highp float;
                #endif

                uniform vec2 u_resolution;
                uniform vec2 u_mouse;
                uniform float u_time;

                vec3 palette3(float t, float factor) {
                    vec3 a = vec3(0.5) + 0.3 * sin(vec3(0.1, 0.3, 0.5) * factor);
                    vec3 b = vec3(0.5) + 0.3 * cos(vec3(0.2, 0.4, 0.6) * factor);
                    vec3 c = vec3(1.0) + 0.5 * sin(vec3(0.3, 0.7, 0.9) * factor);
                    vec3 d = vec3(0.25, 0.4, 0.55) + 0.2 * cos(vec3(0.5, 0.6, 0.7) * factor);
                    return a + b * cos(6.28318 * (c * t + d));
                }

                void main() {
                    vec2 st = (gl_FragCoord.xy / u_resolution.xy) * 2.0 - 1.0;
                    st.x *= u_resolution.x/u_resolution.y;
                    vec3 color = vec3(0.0);

                    for (float i = 1.0; i < 6.0; i++) {
                        vec2 st0 = st;
                        float sgn = 1.0 - 2.0 * mod(i, 2.0);
                        float t = u_time * 0.02 - float(i);
                        st0 *= mat2(cos(t), sin(t), -sin(t), cos(t));

                        float R = length(st0);
                        float d = R * i;
                        float angle = atan(st0.y, st0.x) * 3.0;

                        vec3 pal = palette3(-exp((length(d) * -0.9)), abs(d) * 0.4);

                        float radial = exp(-R); 
                        radial *= smoothstep(1.2, 0.5, R);
                        pal *= radial;

                        float phase = -(d + sgn * angle) + u_time * 0.3;
                        float v = sin(phase);
                        v = max(abs(v), 0.02);
                        float w = pow(0.02 / v, 0.8);

                        color += pal * w;
                    }

                    gl_FragColor = vec4(color, 1.0);
                }
                </script>
            </div>
            <div class="text">

            </div>
        </div>
    </section>
    
</body>
</html>