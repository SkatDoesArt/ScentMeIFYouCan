@startuml
title Diagramme d'activité – Payer une commande (UC9)

|Client|
start
:Passer commande;
:Choisir un mode de paiement;

|Système|
if (Mode de paiement valide ?) then (Non)
    |Client|
    :Afficher message
    "Mode de paiement invalide";
    stop
else (Oui)

    if (Informations de paiement
    enregistrées ?) then (Oui)

        |Client|
        if (Utiliser les informations
        enregistrées ?) then (Oui)
            :Saisir le code secret;
        else (Non)
            :Saisir les informations
            de paiement;
            :Saisir le code secret;
        endif

    else (Non)
        |Client|
        :Saisir les informations
        de paiement;
        :Saisir le code secret;
    endif

    |Client|
    :Valider le paiement;

    |Système de paiement|
    if (Paiement accepté ?) then (Oui)
        :Confirmer la transaction;

        |Serveur mail|
        :Envoyer confirmation
        au client;
        stop
    else (Non)
        :Envoyer mail de refus au client;
        stop
    endif

endif

@enduml
